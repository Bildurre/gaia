@use '../abstracts' as *;
@use '../components/hamburger' as *;
@use '../components/backdrop' as *;
@use '../components/mobile-panel' as *;
@use '../components/mobile-menu' as *;
@use '../components/desktop-menu' as *;
@use '../components/search-form' as *;

// ========================================
// Header Default
// ========================================
// Composes generic components with header-specific layout
// CSS custom properties set by PHP:
// --header-bg, --header-text, --header-current, --header-content-width

.header-default {
  position: relative;
  padding: 1rem;
  background-color: var(--header-bg);
  color: var(--header-text);
  transition: transform 0.3s ease, box-shadow 0.3s ease;
  z-index: 1000;

  // ========================================
  // Variants
  // ========================================

  &--sticky {
    position: sticky;
    top: 0;

    .admin-bar & {
      top: var(--wp-admin--admin-bar--height, 32px);
    }
  }

  &--hidden {
    transform: translateY(-100%);
  }

  &--scrolled {
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
  }

  // ========================================
  // Layout
  // ========================================

  &__container {
    max-width: var(--header-content-width, var(--wp--style--global--wide-size));
    margin: 0 auto;
  }

  &__top {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 1rem;
  }

  &__logo {
    a {
      display: block;
      color: inherit;
      text-decoration: none;
    }

    img {
      display: block;
      height: 40px;
      width: auto;
    }
  }

  &__site-name {
    font-size: 1.5rem;
    font-weight: 700;
  }

  &__actions {
    display: flex;
    align-items: center;
    gap: 1rem;

    @media (max-width: $mobile-breakpoint) {
      display: none;
    }
  }

  &__nav {
    margin-top: 1rem;

    @media (max-width: $mobile-breakpoint) {
      display: none;
    }
  }

  // ========================================
  // Component: Hamburger
  // ========================================

  &__hamburger {
    @include hamburger;
    order: -1;
  }

  &__hamburger-bar {
    @include hamburger-bar;
  }

  &__hamburger.is-active &__hamburger-bar {
    @include hamburger-bar-active;
  }

  // ========================================
  // Component: Desktop Menu
  // ========================================

  &__menu {
    @include desktop-menu;
    --menu-color: var(--header-text);
    --menu-current-color: var(--header-current);
    --menu-bg: var(--header-bg);
  }

  // ========================================
  // Component: Mobile Panel
  // ========================================

  &__mobile-panel {
    @include mobile-panel;
    --panel-bg: var(--header-bg);
    --panel-text: var(--header-text);
  }

  &__mobile-content {
    @include mobile-panel-content;
  }

  // ========================================
  // Component: Mobile Menu
  // ========================================

  &__mobile-menu {
    @include mobile-menu;
    --menu-color: var(--header-text);
    --menu-current-color: var(--header-current);
  }

  // ========================================
  // Component: Backdrop
  // ========================================

  &__backdrop {
    @include backdrop;
  }

  // ========================================
  // Mobile-specific sections
  // ========================================

  &__mobile-search {
    .search-form {
      @include search-form;
    }

    .search-field {
      padding: 0.75rem 1rem;
    }

    .search-submit {
      padding: 0.75rem;
    }
  }

  &__mobile-actions {
    padding-bottom: 1.5rem;
    border-bottom: 1px solid currentColor;
    opacity: 0.3;
  }

  // ========================================
  // Desktop Search (inline)
  // ========================================

  &__search {
    .search-form {
      @include search-form;
    }

    .search-field {
      width: 160px;
      transition: width 0.2s ease, background 0.2s ease;

      &:focus {
        width: 200px;
      }
    }
  }
}